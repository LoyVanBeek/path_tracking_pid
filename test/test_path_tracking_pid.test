<?xml version="1.0"?>

<launch>
    <arg name="rviz" default="true"/>
    <arg name="reconfigure" default="true"/>

    <!-- Move base flex, using the path_tracking_pid local planner -->
    <include file="$(find path_tracking_pid)/launch/path_tracking_pid_mbf.launch" />

    <!--Rather than running Gazebo to simulate a robot, just use cmd_vel to calculate odom and TF-->
    <node pkg="mobile_robot_simulator" type="mobile_robot_simulator_node" name="mobile_robot_simulator" output="screen">
        <param name="publish_map_transform" value="true"/>
        <remap from='mobile_robot_simulator/publish_rate' to='move_base_flex/controller_frequency'/>
        <!-- <remap from="move_base/cmd_vel" to="/cmd_vel"/>
        <remap from="odom" to="/odom"/> -->
    </node>

    <node  if="$(eval rviz)" name="rviz" pkg="rviz" type="rviz" args="-d $(find path_tracking_pid)/test/test.rviz" />
    <node  if="$(eval reconfigure)" name="reconfigure" pkg="rqt_reconfigure" type="rqt_reconfigure" />

    <node pkg="tf2_ros" type="static_transform_publisher" name="nav_test" args="0.0 0 0 0 0 0 base_link nav_link" />

    <test test-name="rostest_bw_curve_cancel" pkg="path_tracking_pid" type="test_path_tracking_pid_bw_turn_cancel.py" time-limit="300.0" />

</launch>
